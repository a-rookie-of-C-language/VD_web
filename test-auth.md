# è®¤è¯é—®é¢˜è°ƒè¯•æŒ‡å—

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### é—®é¢˜1: è·¯ç”±å®ˆå«æœªæ­£ç¡®æ£€æŸ¥ç»§æ‰¿çš„ meta å±æ€§
**ä¿®å¤**: ä½¿ç”¨ `to.matched.some()` æ£€æŸ¥æ‰€æœ‰åŒ¹é…çš„è·¯ç”±è®°å½•ï¼ˆåŒ…æ‹¬çˆ¶è·¯ç”±ï¼‰

### é—®é¢˜2: Sidebar ç»„ä»¶æ— æ¡ä»¶åŠ è½½ç”¨æˆ·ä¿¡æ¯
**ä¿®å¤**: åªæœ‰åœ¨ token å­˜åœ¨æ—¶æ‰åŠ è½½ç”¨æˆ·ä¿¡æ¯

### é—®é¢˜3: useUserStore ä»è¿‡æœŸç¼“å­˜åŠ è½½æ•°æ®
**ä¿®å¤**: 
- ä¼˜å…ˆæ£€æŸ¥ token æ˜¯å¦å­˜åœ¨
- å¦‚æœæ²¡æœ‰ tokenï¼Œç«‹å³æ¸…ç©ºç”¨æˆ·æ•°æ®
- å¦‚æœ API è°ƒç”¨å¤±è´¥ï¼Œæ¸…é™¤æ— æ•ˆçš„ token å’Œ userInfo

## ğŸ“¦ æœ€æ–°æ„å»ºç‰ˆæœ¬
- **ç‰ˆæœ¬**: 0.0.1
- **å®‰è£…åŒ…**: `release\VolunteerDashboard Setup 0.0.1.exe`
- **æ„å»ºæ—¶é—´**: åˆšåˆšå®Œæˆ

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### æ­¥éª¤ 1: å®Œå…¨æ¸…ç†æ—§ç‰ˆæœ¬
1. **å¸è½½æ—§ç‰ˆæœ¬çš„åº”ç”¨**
   - æ‰“å¼€"è®¾ç½®" > "åº”ç”¨" > "åº”ç”¨å’ŒåŠŸèƒ½"
   - æ‰¾åˆ° "VolunteerDashboard" å¹¶å¸è½½

2. **æ¸…ç†åº”ç”¨æ•°æ®**ï¼ˆé‡è¦ï¼ï¼‰
   ```powershell
   # æ¸…ç†åº”ç”¨æ•°æ®ç›®å½•
   Remove-Item -Recurse -Force "$env:APPDATA\VolunteerDashboard" -ErrorAction SilentlyContinue
   Remove-Item -Recurse -Force "$env:LOCALAPPDATA\VolunteerDashboard" -ErrorAction SilentlyContinue
   ```

### æ­¥éª¤ 2: å®‰è£…æ–°ç‰ˆæœ¬
```powershell
# åœ¨é¡¹ç›®ç›®å½•è¿è¡Œ
.\release\VolunteerDashboard Setup 0.0.1.exe
```

### æ­¥éª¤ 3: æµ‹è¯•æœªç™»å½•è·³è½¬
1. **æ‰“å¼€åº”ç”¨**
2. **æŒ‰ F12 æˆ– Ctrl+Shift+I** æ‰“å¼€å¼€å‘è€…å·¥å…·
3. **æŸ¥çœ‹ Console æ ‡ç­¾é¡µ**ï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
   ```
   [Router Guard] {
     to: "/",
     from: "/",
     isAuthenticated: false,
     requiresAuth: true,
     requiresSuperAdmin: false,
     token: "missing",
     userInfo: "missing"
   }
   [Router Guard] Auth required but not authenticated, redirecting to /login
   [Router Guard] Going to login page
   [UserStore] No token found, clearing user data
   ```

4. **ç¡®è®¤åº”ç”¨è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ**

### æ­¥éª¤ 4: æµ‹è¯•ç™»å½•åŠŸèƒ½
1. **è¾“å…¥æ­£ç¡®çš„å­¦å·å’Œå¯†ç **
2. **ç‚¹å‡»ç™»å½•**
3. **åº”è¯¥è‡ªåŠ¨è·³è½¬åˆ°æ´»åŠ¨åˆ—è¡¨é¡µ** (`/activities`)
4. **ä¾§è¾¹æ åº•éƒ¨åº”è¯¥æ˜¾ç¤ºä½ çš„ç”¨æˆ·ä¿¡æ¯**

### æ­¥éª¤ 5: æµ‹è¯•ç™»å½•çŠ¶æ€ä¿æŒ
1. **å…³é—­åº”ç”¨**
2. **é‡æ–°æ‰“å¼€åº”ç”¨**
3. **åº”è¯¥ç›´æ¥è¿›å…¥æ´»åŠ¨åˆ—è¡¨é¡µ**ï¼ˆæ— éœ€é‡æ–°ç™»å½•ï¼‰
4. **Console åº”è¯¥æ˜¾ç¤º**ï¼š
   ```
   [UserStore] Loaded user from cache: ä½ çš„å­¦å·
   [Router Guard] Already logged in, redirecting to /activities
   ```

### æ­¥éª¤ 6: æµ‹è¯•é€€å‡ºç™»å½•
1. **ç‚¹å‡»ä¾§è¾¹æ åº•éƒ¨çš„é€€å‡ºæŒ‰é’®**
2. **ç¡®è®¤é€€å‡º**
3. **åº”è¯¥ç«‹å³è·³è½¬åˆ°ç™»å½•é¡µ**
4. **ä¾§è¾¹æ åº”è¯¥æ˜¾ç¤º "æœªç™»å½•"**

## ğŸ” å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

### æ‰‹åŠ¨æ¸…ç† localStorage
åœ¨å¼€å‘è€…å·¥å…·çš„ Console ä¸­æ‰§è¡Œï¼š
```javascript
// æŸ¥çœ‹å½“å‰å­˜å‚¨çš„æ•°æ®
console.log('Token:', localStorage.getItem('token'))
console.log('UserInfo:', localStorage.getItem('userInfo'))

// å®Œå…¨æ¸…ç©ºå¹¶é‡æ–°åŠ è½½
localStorage.clear()
location.reload()
```

### æ£€æŸ¥è·¯ç”±çŠ¶æ€
```javascript
// æŸ¥çœ‹å½“å‰è·¯ç”±
console.log('Current route:', window.location.hash)

// æŸ¥çœ‹è·¯ç”±å™¨çŠ¶æ€ï¼ˆéœ€è¦åœ¨ Vue DevTools ä¸­ï¼‰
```

### æä¾›è¯Šæ–­ä¿¡æ¯
å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ï¼š
1. âœ… å®Œæ•´çš„ Console æ—¥å¿—ï¼ˆç‰¹åˆ«æ˜¯ [Router Guard] å’Œ [UserStore] å¼€å¤´çš„ï¼‰
2. âœ… å½“å‰çš„ URL hash å€¼ï¼ˆä¾‹å¦‚ `#/activities`ï¼‰
3. âœ… localStorage ä¸­çš„ token å’Œ userInfo å€¼
4. âœ… å…·ä½“çš„é”™è¯¯ç°è±¡ï¼ˆä¾‹å¦‚ï¼šåœç•™åœ¨å“ªä¸ªé¡µé¢ï¼Œåº”è¯¥è·³è½¬åˆ°å“ªé‡Œï¼‰

## ğŸ“ ä¿®å¤æ€»ç»“

### ä¹‹å‰çš„é—®é¢˜
- âŒ è·¯ç”±å®ˆå«åªæ£€æŸ¥ `to.meta.requiresAuth`ï¼Œå¿½ç•¥äº†çˆ¶è·¯ç”±çš„ meta
- âŒ Sidebar ç»„ä»¶æ€»æ˜¯ä» localStorage åŠ è½½ç”¨æˆ·ä¿¡æ¯
- âŒ useUserStore ä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œå³ä½¿ token å·²å¤±æ•ˆ

### ç°åœ¨çš„è¡Œä¸º
- âœ… è·¯ç”±å®ˆå«æ£€æŸ¥æ‰€æœ‰åŒ¹é…è·¯ç”±çš„ metaï¼ˆåŒ…æ‹¬çˆ¶è·¯ç”±ï¼‰
- âœ… åªæœ‰åœ¨ token å­˜åœ¨æ—¶æ‰åŠ è½½ç”¨æˆ·ä¿¡æ¯
- âœ… å¦‚æœ token ä¸å­˜åœ¨æˆ–æ— æ•ˆï¼Œç«‹å³æ¸…ç©ºç”¨æˆ·æ•°æ®å¹¶è·³è½¬åˆ°ç™»å½•é¡µ
- âœ… è¯¦ç»†çš„æ—¥å¿—è¾“å‡ºï¼Œæ–¹ä¾¿è°ƒè¯•

## ğŸ¯ é¢„æœŸè¡Œä¸º
| åœºæ™¯ | é¢„æœŸè¡Œä¸º |
|------|---------|
| é¦–æ¬¡æ‰“å¼€åº”ç”¨ | è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ |
| ç™»å½•æˆåŠŸ | è·³è½¬åˆ°æ´»åŠ¨åˆ—è¡¨é¡µ |
| åˆ·æ–°åº”ç”¨ï¼ˆå·²ç™»å½•ï¼‰ | ä¿æŒç™»å½•çŠ¶æ€ï¼Œåœç•™åœ¨å½“å‰é¡µ |
| é€€å‡ºç™»å½• | ç«‹å³è·³è½¬åˆ°ç™»å½•é¡µ |
| å°è¯•è®¿é—® `/activities`ï¼ˆæœªç™»å½•ï¼‰ | è‡ªåŠ¨é‡å®šå‘åˆ° `/login` |
| å°è¯•è®¿é—® `/login`ï¼ˆå·²ç™»å½•ï¼‰ | è‡ªåŠ¨é‡å®šå‘åˆ° `/activities` |


